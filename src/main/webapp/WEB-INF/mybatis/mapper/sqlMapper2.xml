<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ItemsInterface">
	<resultMap type="items" id="items">
		<result property="I_DESCRIPTION" column="I_DESCRIPTION" jdbcType="NCLOB" javaType="java.lang.String" /> 
		<result property="I_PIC" column="I_PIC" jdbcType="BLOB" javaType="java.lang.String" /> 
	</resultMap>
	<resultMap type="sales" id="sales"/>
	<resultMap type="al" id="al" />

	<select id="getItemsList" resultType="items">
	SELECT * FROM ITEMS
	</select>
	<insert id="setItems" parameterType="items">
	INSERT INTO ITEMS VALUES(item_seq.NEXTVAL, #{i_name}, #{i_category},#{i_price}, #{i_pic}, #{i_description})
	</insert>
	<insert id="setItemsTored" parameterType="items">
	INSERT INTO ITEMSTORED VALUES(#{is_name},#{is_count})
	</insert>
	<update id="setItemsUpdate" parameterType="items">
	UPDATE ITEMS SET I_NAME=#{i_name}, I_CATEGORY=#{i_category}, I_PRICE=#{i_price}, I_DESCRIPTION=#{i_description} WHERE I_NAME=#{str} 
	</update>
	<update id="setItemsToredUpdate" parameterType="items">
	UPDATE ITEMSTORED SET IS_COUNT=#{is_count} WHERE IS_NAME=#{str} 
	</update>
	<select id="getContents" resultType="items" parameterType="java.lang.String">
	SELECT * FROM ITEMS, ITEMSTORED WHERE I_NAME=#{i_name} AND I_NAME=IS_NAME
	</select>
	<delete id="delContents" parameterType="Integer">
		DELETE FROM ITEMS WHERE I_NAME=#{i_name}
	</delete>
	<select id="getCategoryContents" resultType="items">
		SELECT * FROM ITEMS WHERE I_CATEGORY=#{i_category}
	</select>
	<select id="getMaxBuyCode" resultType="Integer">
		SELECT S_BUY_CODE FROM SALES_GET_CODE
	</select>
	<insert id="setBuyItems" parameterType="sales">
	INSERT INTO SALES(s_num,s_id,s_buy_code,s_item_name,s_buy_cnt,s_buy_price,s_buy_date) VALUES(sales_seq.NEXTVAL, #{s_id}, #{s_buy_code},#{s_item_name}, #{s_buy_cnt}, #{s_buy_price}, default)
	</insert>
</mapper>